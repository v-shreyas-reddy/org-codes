<template>
  <lightning-card title="Dynamic Picklists Example" icon-name="custom:custom63">
    <div class="slds-grid slds-wrap slds-p-around_medium">
      <div class="slds-col slds-size_1-of-2 slds-p-around_x-small">
        <!-- Account lookup as picklist -->
        <lightning-combobox
          label="Account"
          placeholder="-Select Account-"
          options={accountOptions}
          onchange={handlePicklistChange}
          data-field="Account__c"
          value={resource.Account__c}
        ></lightning-combobox>

        <!-- Opportunity lookup as picklist -->
        <lightning-combobox
          label="Opportunity"
          placeholder="-Select Opportunity-"
          options={oppOptions}
          onchange={handlePicklistChange}
          data-field="Opportunity__c"
          value={resource.Opportunity__c}
        ></lightning-combobox>

        <!-- Requester Name -->
        <lightning-input
          label="Requester Name"
          type="text"
          onchange={handleInputChange}
          data-field="Requester_Name__c"
          value={resource.Requester_Name__c}
          required
        ></lightning-input>
        <!-- Recruiter Name -->
        <lightning-input
          label="Recruiter Name"
          type="text"
          onchange={handleInputChange}
          data-field="Recruiter_Name__c"
          value={resource.Recruiter_Name__c}
          required
        ></lightning-input>
        <!-- Employee Name (Replacement) -->
        <lightning-input
          label="Employee Name (Replacement)"
          type="text"
          onchange={handleInputChange}
          data-field="Employee_Name_Replacement__c"
          value={resource.Employee_Name_Replacement__c}
        ></lightning-input>
        <!-- Project Name -->
        <lightning-input
          label="Project Name"
          type="text"
          onchange={handleInputChange}
          data-field="Project_Name__c"
          value={resource.Project_Name__c}
        ></lightning-input>
        <!-- Recruitment Start Date -->
        <lightning-input
          label="Recruitment Start Date"
          type="date"
          onchange={handleInputChange}
          data-field="Recruitment_Start_Date__c"
          value={resource.Recruitment_Start_Date__c}
        ></lightning-input>
        <!-- Onboarding Date -->
        <lightning-input
          label="Onboarding Date"
          type="date"
          onchange={handleInputChange}
          data-field="Onboarding_Date__c"
          value={resource.Onboarding_Date__c}
          required
        ></lightning-input>
        <!-- Comments -->
        <lightning-textarea
          label="Comments"
          onchange={handleInputChange}
          data-field="Comments__c"
          value={resource.Comments__c}
        ></lightning-textarea>
        <!-- Positions -->
        <lightning-input
          label="Positions"
          type="number"
          onchange={handleInputChange}
          data-field="Positions__c"
          value={resource.Positions__c}
          required
        ></lightning-input>
        <!-- Billing Rate -->
        <lightning-input
          label="Billing Rate"
          type="number"
          onchange={handleInputChange}
          data-field="Billing_Rate__c"
          value={resource.Billing_Rate__c}
          required
        ></lightning-input>
        <!-- Currency -->
        <lightning-input
          label="Currency"
          type="number"
          onchange={handleInputChange}
          data-field="Currency__c"
          value={resource.Currency__c}
          required
        ></lightning-input>
        <!-- Client Interview Required -->
        <lightning-combobox
          label="Client Interview Required"
          placeholder="Select"
          options={picklistOptionsMap.Client_Interview_Required__c}
          onchange={handlePicklistChange}
          data-field="Client_Interview_Required__c"
          value={resource.Client_Interview_Required__c}
          required
        >
        </lightning-combobox>
      </div>
      <div class="slds-col slds-size_1-of-2 slds-p-around_x-small">
        <!-- Department -->
        <lightning-combobox
          label="Department"
          placeholder="Select"
          options={picklistOptionsMap.Department__c}
          onchange={handlePicklistChange}
          data-field="Department__c"
          value={resource.Department__c}
          required
        >
        </lightning-combobox>

        <!-- Location -->
        <lightning-combobox
          label="Location"
          placeholder="Select"
          options={picklistOptionsMap.Location__c}
          onchange={handlePicklistChange}
          data-field="Location__c"
          value={resource.Location__c}
        >
        </lightning-combobox>

        <!-- Type -->
        <lightning-combobox
          label="Type"
          placeholder="Select"
          options={picklistOptionsMap.Type__c}
          onchange={handlePicklistChange}
          data-field="Type__c"
          value={resource.Type__c}
          required
        >
        </lightning-combobox>
        <!-- Employment Type -->
        <lightning-combobox
          label="Employment Type"
          placeholder="Select"
          options={picklistOptionsMap.Employment_Type__c}
          onchange={handlePicklistChange}
          data-field="Employment_Type__c"
          value={resource.Employment_Type__c}
          required
        >
        </lightning-combobox>
        <!-- Job Location -->
        <lightning-combobox
          label="Job Location"
          placeholder="Select"
          options={picklistOptionsMap.Job_Location__c}
          onchange={handlePicklistChange}
          data-field="Job_Location__c"
          value={resource.Job_Location__c}
          required
        >
        </lightning-combobox>
        <!-- Client Name -->
        <lightning-combobox
          label="Client Name"
          placeholder="Select"
          options={picklistOptionsMap.Client_Name__c}
          onchange={handlePicklistChange}
          data-field="Client_Name__c"
          value={resource.Client_Name__c}
          required
        >
        </lightning-combobox>
        <!-- Expertise Area -->
        <lightning-combobox
          label="Client Name"
          placeholder="Select"
          options={picklistOptionsMap.Expertise_Area__c}
          onchange={handlePicklistChange}
          data-field="Expertise_Area__c"
          value={resource.Expertise_Area__c}
          required
        >
        </lightning-combobox>
        <!-- Onsite Interview Required -->
        <lightning-combobox
          label="Onsite Interview Required"
          placeholder="Select"
          options={picklistOptionsMap.Onsite_Interview_Required__c}
          onchange={handlePicklistChange}
          data-field="Onsite_Interview_Required__c"
          value={resource.Onsite_Interview_Required__c}
        >
        </lightning-combobox>
        <!-- Level Grade -->
        <lightning-combobox
          label="Level & Grade"
          placeholder="Select"
          options={picklistOptionsMap.Level_Grade__c}
          onchange={handlePicklistChange}
          data-field="Level_Grade__c"
          value={resource.Level_Grade__c}
          required
        >
        </lightning-combobox>
        <!-- Priority -->
        <lightning-combobox
          label="Priority"
          placeholder="Select"
          options={picklistOptionsMap.Priority__c}
          onchange={handlePicklistChange}
          data-field="Priority__c"
          value={resource.Priority__c}
          required
        >
        </lightning-combobox>
        <!-- Title -->
        <lightning-combobox
          label="Title"
          placeholder="Select"
          options={picklistOptionsMap.Title__c}
          onchange={handlePicklistChange}
          data-field="Title__c"
          value={resource.Title__c}
          required
        >
        </lightning-combobox>
        <!-- Billability -->
        <lightning-combobox
          label="Billability"
          placeholder="Select"
          options={picklistOptionsMap.Billability__c}
          onchange={handlePicklistChange}
          data-field="Billability__c"
          value={resource.Billability__c}
          required
        >
        </lightning-combobox>
        <!-- Shift Timings -->
        <lightning-combobox
          label="Shift Timings"
          placeholder="Select"
          options={picklistOptionsMap.Shift_Timings__c}
          onchange={handlePicklistChange}
          data-field="Shift_Timings__c"
          value={resource.Shift_Timings__c}
          required
        >
        </lightning-combobox>
      </div>
    </div>
    <div slot="footer" class="slds-align_absolute-center">
      <lightning-button
        icon-name="utility:save"
        variant="success"
        label="Save"
        onclick={handleSaveClick}
      ></lightning-button>
    </div>
  </lightning-card>
  !-- modal start -->
  <template if:true={isShowModal}>
    <section
      role="dialog"
      tabindex="-1"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
      class="slds-modal slds-fade-in-open"
    >
      <div class="slds-modal__container">
        <!-- modal header start -->
        <header class="slds-modal__header">
          <!-- <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                        title="Close" onclick={hideModalBox}>
                        <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                            size="small"></lightning-icon>
                        <span class="slds-assistive-text">Close</span>
                    </button> -->
          <h2
            id="modal-heading-01"
            class="slds-text-heading_medium slds-hyphenate"
          >
            Resource request has been sent to:
          </h2>
        </header>

        <!-- modal body start -->
        <div
          class="slds-modal__content slds-p-around_medium"
          id="modal-content-id-1"
        >
          <template if:true={approvers.length}>
            <ul>
              <template for:each={approvers} for:item="approver">
                <li key={approver.email}>{approver.name}</li>
              </template>
            </ul>
          </template>
          <template if:true={error}>
            <p>Error fetching approvers: {error}</p>
          </template>
        </div>

        <!-- modal footer start-->
        <footer class="slds-modal__footer">
          <lightning-button
            class="slds-button slds-button_neutral"
            label="OK"
            onclick={hideModalBox}
          ></lightning-button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>
  <!-- modal end -->
</template>
