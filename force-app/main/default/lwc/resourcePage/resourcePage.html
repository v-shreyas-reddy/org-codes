<!-- sldsValidatorIgnore -->
<template>
  <lightning-card title="Resource Page" icon-name="custom:custom63">
    <div class="slds-grid slds-grid_align-space slds-p-horizontal_large">
      <div>
        <lightning-button
          variant="base"
          label="All"
          onclick={handleFilterAll}
        ></lightning-button>
      </div>
      <div>
        <lightning-button
          variant="base"
          label="Approved"
          onclick={handleFilterApproved}
        ></lightning-button>
      </div>
      <div>
        <lightning-button
          variant="base"
          label="Pending"
          onclick={handleFilterPending}
        ></lightning-button>
      </div>
      <div>
        <lightning-button
          variant="base"
          label="Rejected"
          onclick={handleFilterRejected}
        ></lightning-button>
      </div>
    </div>

    <div class="slds-grid slds-gutters slds-wrap slds-p-around_medium">
      <!-- Search Input -->
      <div class="slds-col slds-size_1-of-3">
        <lightning-input
          label="Search"
          type="text"
          placeholder="Requisition name, Code, Location"
          value={searchKey}
          onchange={handleSearchChange}
        ></lightning-input>
      </div>
      <!-- Department Picklist -->
      <div class="slds-col slds-size_1-of-3">
        <lightning-combobox
          label="Department"
          placeholder="Select Department"
          options={departmentOptions}
          onchange={handleDepartment}
        ></lightning-combobox>
      </div>
      <!-- Recruiter Picklist -->
      <div class="slds-col slds-size_1-of-3">
        <lightning-combobox
          label="Recruiter"
          placeholder="Select a Recruiter"
          options={recruiterOptions}
          onchange={handleRecruiterChange}
        ></lightning-combobox>
      </div>
    </div>

    <!-- Datatable -->
    <template if:true={resList}>
      <lightning-datatable
        data={resList}
        columns={columns}
        key-field="id"
        hide-checkbox-column="true"
        show-row-number-column
      ></lightning-datatable>

      <!-- Pagination Controls with Left/Right Alignment in One Line -->
      <div
        class="slds-grid slds-grid_align-spread slds-m-top_medium slds-align-middle slds-p-horizontal_medium"
      >
        <!-- Left side: Rows per page selection and text -->
        <div class="slds-grid slds-align-middle">
          Rows per page:
          <lightning-combobox
            value={pageSize}
            placeholder="Rows per page"
            options={rowsPerPageOptions}
            onchange={handleRowsPerPageChange}
            class="slds-m-left_small"
          ></lightning-combobox>
          <span class="slds-m-left_medium"
            >{firstRow}-{lastRow} of {totalRecords}</span
          >
        </div>

        <!-- Right side: Pagination buttons in one line -->
        <div class="slds-grid slds-align-middle">
          <!-- Previous Button with Icon -->
          <lightning-button-icon
            icon-name="utility:chevronleft"
            alternative-text="Previous"
            onclick={handlePrevious}
            disabled={isFirstPage}
            class="slds-m-right_small"
          ></lightning-button-icon>

          <!-- Numbered Page Buttons with Spacing -->
          <template for:each={pages} for:item="page">
            <lightning-button
              key={page.label}
              label={page.label}
              onclick={handlePageChange}
              class={page.class}
            ></lightning-button>
          </template>

          <!-- Next Button with Icon -->
          <lightning-button-icon
            icon-name="utility:chevronright"
            alternative-text="Next"
            onclick={handleNext}
            disabled={isLastPage}
            class="slds-m-left_small"
          ></lightning-button-icon>
        </div>
      </div>
    </template>

    <!-- Error handling -->
    <template if:true={error}>
      <div class="slds-text-color_error slds-m-top_medium">{error}</div>
    </template>
  </lightning-card>
</template>
